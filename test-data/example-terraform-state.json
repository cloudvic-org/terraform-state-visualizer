{
  "format_version": "1.0",
  "terraform_version": "1.13.3",
  "values": {
    "outputs": {
      "vpc_id": {
        "sensitive": false,
        "type": "string",
        "value": "vpc-0123456789abcdef0"
      },
      "database_endpoint": {
        "sensitive": true,
        "type": "string",
        "value": "prod-db.cluster-xyz.us-west-2.rds.amazonaws.com"
      }
    },
    "root_module": {
      "resources": [
        {
          "address": "aws_iam_role.main",
          "mode": "managed",
          "type": "aws_iam_role",
          "name": "main",
          "provider_name": "registry.terraform.io/hashicorp/aws",
          "schema_version": 0,
          "values": {
            "name": "main-role",
            "assume_role_policy": "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"ec2.amazonaws.com\"},\"Action\":\"sts:AssumeRole\"}]}"
          },
          "sensitive_values": {}
        },
        {
          "address": "aws_s3_bucket.main",
          "mode": "managed",
          "type": "aws_s3_bucket",
          "name": "main",
          "provider_name": "registry.terraform.io/hashicorp/aws",
          "schema_version": 0,
          "values": {
            "bucket": "my-terraform-state-bucket-xyz123",
            "tags": {
              "Name": "main-bucket",
              "Environment": "production",
              "Purpose": "terraform-state"
            }
          },
          "sensitive_values": {}
        },
        {
          "address": "aws_s3_bucket_versioning.main",
          "mode": "managed",
          "type": "aws_s3_bucket_versioning",
          "name": "main",
          "provider_name": "registry.terraform.io/hashicorp/aws",
          "schema_version": 0,
          "values": {
            "bucket": "my-terraform-state-bucket-xyz123",
            "versioning_configuration": [
              {
                "status": "Enabled"
              }
            ]
          },
          "sensitive_values": {}
        },
        {
          "address": "aws_s3_bucket_public_access_block.main",
          "mode": "managed",
          "type": "aws_s3_bucket_public_access_block",
          "name": "main",
          "provider_name": "registry.terraform.io/hashicorp/aws",
          "schema_version": 0,
          "values": {
            "bucket": "my-terraform-state-bucket-xyz123",
            "block_public_acls": true,
            "block_public_policy": true,
            "ignore_public_acls": true,
            "restrict_public_buckets": true
          },
          "sensitive_values": {}
        },
        {
          "address": "aws_dynamodb_table.terraform_locks",
          "mode": "managed",
          "type": "aws_dynamodb_table",
          "name": "terraform_locks",
          "provider_name": "registry.terraform.io/hashicorp/aws",
          "schema_version": 0,
          "values": {
            "name": "terraform-state-locks",
            "billing_mode": "PAY_PER_REQUEST",
            "hash_key": "LockID",
            "attribute": [
              {
                "name": "LockID",
                "type": "S"
              }
            ],
            "tags": {
              "Name": "terraform-locks",
              "Environment": "production"
            }
          },
          "sensitive_values": {}
        },
        {
          "address": "aws_cloudwatch_log_group.main",
          "mode": "managed",
          "type": "aws_cloudwatch_log_group",
          "name": "main",
          "provider_name": "registry.terraform.io/hashicorp/aws",
          "schema_version": 0,
          "values": {
            "name": "/aws/terraform/main",
            "retention_in_days": 30,
            "tags": {
              "Name": "main-logs",
              "Environment": "production"
            }
          },
          "sensitive_values": {}
        },
        {
          "address": "data.aws_caller_identity.current",
          "mode": "data",
          "type": "aws_caller_identity",
          "name": "current",
          "provider_name": "registry.terraform.io/hashicorp/aws",
          "schema_version": 0,
          "values": {
            "account_id": "123456789012",
            "arn": "arn:aws:iam::123456789012:root",
            "user_id": "AIDACKCEVSQ6C2EXAMPLE"
          },
          "sensitive_values": {}
        },
        {
          "address": "data.aws_region.current",
          "mode": "data",
          "type": "aws_region",
          "name": "current",
          "provider_name": "registry.terraform.io/hashicorp/aws",
          "schema_version": 0,
          "values": {
            "name": "us-west-2",
            "description": "US West (Oregon)"
          },
          "sensitive_values": {}
        }
      ],
      "child_modules": [
        {
          "address": "module.vpc",
          "resources": [
            {
              "address": "module.vpc.aws_vpc.main",
              "mode": "managed",
              "type": "aws_vpc",
              "name": "main",
              "provider_name": "registry.terraform.io/hashicorp/aws",
              "schema_version": 1,
              "values": {
                "cidr_block": "10.0.0.0/16",
                "enable_dns_hostnames": true,
                "enable_dns_support": true,
                "tags": {
                  "Name": "main-vpc",
                  "Environment": "production"
                }
              },
              "sensitive_values": {}
            },
            {
              "address": "module.vpc.aws_subnet.private",
              "mode": "managed",
              "type": "aws_subnet",
              "name": "private",
              "provider_name": "registry.terraform.io/hashicorp/aws",
              "schema_version": 1,
              "values": {
                "vpc_id": "vpc-0123456789abcdef0",
                "cidr_block": "10.0.1.0/24",
                "availability_zone": "us-west-2a",
                "tags": {
                  "Name": "private-subnet",
                  "Type": "Private"
                }
              },
              "sensitive_values": {}
            },
            {
              "address": "module.vpc.aws_internet_gateway.main",
              "mode": "managed",
              "type": "aws_internet_gateway",
              "name": "main",
              "provider_name": "registry.terraform.io/hashicorp/aws",
              "schema_version": 0,
              "values": {
                "vpc_id": "vpc-0123456789abcdef0",
                "tags": {
                  "Name": "main-igw",
                  "Environment": "production"
                }
              },
              "sensitive_values": {}
            },
            {
              "address": "module.vpc.aws_route_table.public",
              "mode": "managed",
              "type": "aws_route_table",
              "name": "public",
              "provider_name": "registry.terraform.io/hashicorp/aws",
              "schema_version": 0,
              "values": {
                "vpc_id": "vpc-0123456789abcdef0",
                "route": [
                  {
                    "cidr_block": "0.0.0.0/0",
                    "gateway_id": "igw-0123456789abcdef0"
                  }
                ],
                "tags": {
                  "Name": "public-rt",
                  "Type": "Public"
                }
              },
              "sensitive_values": {}
            }
          ],
          "child_modules": [
            {
              "address": "module.vpc.module.security",
              "resources": [
                {
                  "address": "module.vpc.module.security.aws_security_group.database",
                  "mode": "managed",
                  "type": "aws_security_group",
                  "name": "database",
                  "provider_name": "registry.terraform.io/hashicorp/aws",
                  "schema_version": 1,
                  "values": {
                    "name": "database-sg",
                    "description": "Security group for database",
                    "vpc_id": "vpc-0123456789abcdef0",
                    "ingress": [
                      {
                        "from_port": 3306,
                        "to_port": 3306,
                        "protocol": "tcp",
                        "cidr_blocks": ["10.0.0.0/16"]
                      }
                    ]
                  },
                  "sensitive_values": {}
                },
                {
                  "address": "module.vpc.module.security.aws_security_group.web",
                  "mode": "managed",
                  "type": "aws_security_group",
                  "name": "web",
                  "provider_name": "registry.terraform.io/hashicorp/aws",
                  "schema_version": 1,
                  "values": {
                    "name": "web-sg",
                    "description": "Security group for web servers",
                    "vpc_id": "vpc-0123456789abcdef0",
                    "ingress": [
                      {
                        "from_port": 80,
                        "to_port": 80,
                        "protocol": "tcp",
                        "cidr_blocks": ["0.0.0.0/0"]
                      },
                      {
                        "from_port": 443,
                        "to_port": 443,
                        "protocol": "tcp",
                        "cidr_blocks": ["0.0.0.0/0"]
                      }
                    ]
                  },
                  "sensitive_values": {}
                },
                {
                  "address": "module.vpc.module.security.aws_key_pair.main",
                  "mode": "managed",
                  "type": "aws_key_pair",
                  "name": "main",
                  "provider_name": "registry.terraform.io/hashicorp/aws",
                  "schema_version": 1,
                  "values": {
                    "key_name": "prod-key-pair",
                    "public_key": "ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQC7VJTUt9Us8cKBwEi4tBQm3TMyBNQ2nSl5KcqmpF1pqjBFCicB8R2vU0C2UftZg6Vr3Hh2xJfY",
                    "tags": {
                      "Name": "production-key",
                      "Environment": "production"
                    }
                  },
                  "sensitive_values": {}
                }
              ],
              "child_modules": []
            }
          ]
        },
        {
          "address": "module.database",
          "resources": [
            {
              "address": "module.database.aws_rds_instance.main",
              "mode": "managed",
              "type": "aws_rds_instance",
              "name": "main",
              "provider_name": "registry.terraform.io/hashicorp/aws",
              "schema_version": 5,
              "values": {
                "identifier": "prod-database",
                "engine": "mysql",
                "engine_version": "8.0.35",
                "instance_class": "db.t3.micro",
                "allocated_storage": 20,
                "db_name": "production",
                "username": "admin",
                "password": "SuperSecretPassword123!",
                "vpc_security_group_ids": ["sg-0123456789abcdef0"],
                "db_subnet_group_name": "prod-subnet-group",
                "backup_retention_period": 7,
                "backup_window": "03:00-04:00",
                "maintenance_window": "sun:04:00-sun:05:00",
                "tags": {
                  "Name": "production-database",
                  "Environment": "production"
                }
              },
              "sensitive_values": {
                "password": true
              }
            },
            {
              "address": "module.database.aws_secretsmanager_secret.db_credentials",
              "mode": "managed",
              "type": "aws_secretsmanager_secret",
              "name": "db_credentials",
              "provider_name": "registry.terraform.io/hashicorp/aws",
              "schema_version": 0,
              "values": {
                "name": "prod/database/credentials",
                "description": "Database credentials for production",
                "secret_string": "{\"username\":\"admin\",\"password\":\"SuperSecretPassword123!\",\"host\":\"prod-db.cluster-xyz.us-west-2.rds.amazonaws.com\",\"port\":3306}",
                "tags": {
                  "Environment": "production",
                  "Service": "database"
                }
              },
              "sensitive_values": {
                "secret_string": true
              }
            },
            {
              "address": "module.database.aws_db_subnet_group.main",
              "mode": "managed",
              "type": "aws_db_subnet_group",
              "name": "main",
              "provider_name": "registry.terraform.io/hashicorp/aws",
              "schema_version": 0,
              "values": {
                "name": "prod-subnet-group",
                "subnet_ids": ["subnet-0123456789abcdef0", "subnet-0123456789abcdef1"],
                "tags": {
                  "Name": "prod-db-subnet-group",
                  "Environment": "production"
                }
              },
              "sensitive_values": {}
            },
            {
              "address": "module.database.aws_db_parameter_group.main",
              "mode": "managed",
              "type": "aws_db_parameter_group",
              "name": "main",
              "provider_name": "registry.terraform.io/hashicorp/aws",
              "schema_version": 0,
              "values": {
                "name": "prod-mysql-params",
                "family": "mysql8.0",
                "description": "Production MySQL parameter group",
                "parameter": [
                  {
                    "name": "max_connections",
                    "value": "1000"
                  },
                  {
                    "name": "innodb_buffer_pool_size",
                    "value": "{DBInstanceClassMemory*3/4}"
                  }
                ],
                "tags": {
                  "Name": "prod-mysql-params",
                  "Environment": "production"
                }
              },
              "sensitive_values": {}
            }
          ],
          "child_modules": [
            {
              "address": "module.database.module.backup",
              "resources": [
                {
                  "address": "module.database.module.backup.aws_s3_bucket.backup",
                  "mode": "managed",
                  "type": "aws_s3_bucket",
                  "name": "backup",
                  "provider_name": "registry.terraform.io/hashicorp/aws",
                  "schema_version": 0,
                  "values": {
                    "bucket": "prod-database-backups-xyz123",
                    "tags": {
                      "Name": "database-backups",
                      "Environment": "production",
                      "Purpose": "backup"
                    }
                  },
                  "sensitive_values": {}
                },
                {
                  "address": "module.database.module.backup.aws_s3_bucket_versioning.backup",
                  "mode": "managed",
                  "type": "aws_s3_bucket_versioning",
                  "name": "backup",
                  "provider_name": "registry.terraform.io/hashicorp/aws",
                  "schema_version": 0,
                  "values": {
                    "bucket": "prod-database-backups-xyz123",
                    "versioning_configuration": [
                      {
                        "status": "Enabled"
                      }
                    ]
                  },
                  "sensitive_values": {}
                }
              ],
              "child_modules": []
            }
          ]
        },
        {
          "address": "module.security",
          "resources": [
            {
              "address": "module.security.aws_iam_access_key.app_key",
              "mode": "managed",
              "type": "aws_iam_access_key",
              "name": "app_key",
              "provider_name": "registry.terraform.io/hashicorp/aws",
              "schema_version": 0,
              "values": {
                "user": "app-user",
                "status": "Active",
                "secret": "AKIAIOSFODNN7EXAMPLE",
                "ses_smtp_password_v4": "BMFhfo7v8EXAMPLESECRETKEY"
              },
              "sensitive_values": {
                "secret": true,
                "ses_smtp_password_v4": true
              }
            },
            {
              "address": "module.security.aws_acm_certificate.main",
              "mode": "managed",
              "type": "aws_acm_certificate",
              "name": "main",
              "provider_name": "registry.terraform.io/hashicorp/aws",
              "schema_version": 0,
              "values": {
                "domain_name": "example.com",
                "subject_alternative_names": ["*.example.com"],
                "validation_method": "DNS",
                "private_key": "-----BEGIN PRIVATE KEY-----\nMIIEvQIBADANBgkqhkiG9w0BAQEFAASCBKcwggSjAgEAAoIBAQC7VJTUt9Us8cKB\nwEi4tBQm3TMyBNQ2nSl5KcqmpF1pqjBFCicB8R2vU0C2UftZg6Vr3Hh2xJfY\n-----END PRIVATE KEY-----",
                "certificate_body": "-----BEGIN CERTIFICATE-----\nMIIDXTCCAkWgAwIBAgIJAKoK/Ovj8oN0MA0GCSqGSIb3DQEBCwUAMEUxCzAJBgNV\nBAYTAkFVMRMwEQYDVQQIDApTb21lLVN0YXRlMSEwHwYDVQQKDBhJbnRlcm5ldCBX\n-----END CERTIFICATE-----"
              },
              "sensitive_values": {
                "private_key": true,
                "certificate_body": true
              }
            },
            {
              "address": "module.security.aws_iam_user.app_user",
              "mode": "managed",
              "type": "aws_iam_user",
              "name": "app_user",
              "provider_name": "registry.terraform.io/hashicorp/aws",
              "schema_version": 0,
              "values": {
                "name": "app-user",
                "path": "/",
                "tags": {
                  "Name": "app-user",
                  "Environment": "production",
                  "Service": "application"
                }
              },
              "sensitive_values": {}
            }
          ],
          "child_modules": []
        },
        {
          "address": "module.monitoring",
          "resources": [
            {
              "address": "module.monitoring.aws_cloudwatch_log_group.app",
              "mode": "managed",
              "type": "aws_cloudwatch_log_group",
              "name": "app",
              "provider_name": "registry.terraform.io/hashicorp/aws",
              "schema_version": 0,
              "values": {
                "name": "/aws/application/prod",
                "retention_in_days": 30,
                "tags": {
                  "Name": "app-logs",
                  "Environment": "production"
                }
              },
              "sensitive_values": {}
            },
            {
              "address": "module.monitoring.aws_cloudwatch_metric_alarm.cpu",
              "mode": "managed",
              "type": "aws_cloudwatch_metric_alarm",
              "name": "cpu",
              "provider_name": "registry.terraform.io/hashicorp/aws",
              "schema_version": 0,
              "values": {
                "alarm_name": "prod-cpu-high",
                "comparison_operator": "GreaterThanThreshold",
                "evaluation_periods": 2,
                "metric_name": "CPUUtilization",
                "namespace": "AWS/EC2",
                "period": 300,
                "statistic": "Average",
                "threshold": 80,
                "alarm_description": "This metric monitors ec2 cpu utilization",
                "tags": {
                  "Name": "cpu-high-alarm",
                  "Environment": "production"
                }
              },
              "sensitive_values": {}
            }
          ],
          "child_modules": [
            {
              "address": "module.monitoring.module.alerts",
              "resources": [
                {
                  "address": "module.monitoring.module.alerts.aws_sns_topic.alerts",
                  "mode": "managed",
                  "type": "aws_sns_topic",
                  "name": "alerts",
                  "provider_name": "registry.terraform.io/hashicorp/aws",
                  "schema_version": 0,
                  "values": {
                    "name": "prod-alerts",
                    "tags": {
                      "Name": "production-alerts",
                      "Environment": "production"
                    }
                  },
                  "sensitive_values": {}
                },
                {
                  "address": "module.monitoring.module.alerts.aws_sns_topic_subscription.email",
                  "mode": "managed",
                  "type": "aws_sns_topic_subscription",
                  "name": "email",
                  "provider_name": "registry.terraform.io/hashicorp/aws",
                  "schema_version": 0,
                  "values": {
                    "topic_arn": "arn:aws:sns:us-west-2:123456789012:prod-alerts",
                    "protocol": "email",
                    "endpoint": "alerts@example.com"
                  },
                  "sensitive_values": {}
                }
              ],
              "child_modules": []
            }
          ]
        }
      ]
    }
  }
}
